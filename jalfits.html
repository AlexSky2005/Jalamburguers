<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="JalFits - Tu gimnasio local asociado a Jalamburguers. Planes accesibles y descuentos especiales.">
  <title>JalFits - Gimnasio Local</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="gym">

<!-- ===================================================================
     HEADER
     =================================================================== -->
<header class="hero gym" style="position: relative;">
  <!-- üì∑ IMAGEN/VIDEO del gimnasio en esquina superior derecha (120x120px logo) -->
  <img src="images/gym-logo.png" alt="JalFits Logo" class="logo-circular-top-right" style="border-color: var(--color-accent);">

  <div class="container">
    <nav class="nav-row">
      <a href="index.html" class="logo-brand">
        <span>JalFits üí™</span>
      </a>
      <nav class="main-nav">
        <a href="#plans">Planes</a>
        <a href="#contact">Contacto</a>
        <a href="index.html">‚Üê Jalamburguers</a>
        <a href="#" id="auth-btn" class="btn ghost" style="border: none; background: transparent; color: var(--color-white); padding: 0; margin: 0;">üîê Iniciar Sesi√≥n</a>
      </nav>
    </nav>

    <div class="hero-inner">
      <h1>JalFits</h1>
      <p class="lead">Entrena duro. Come inteligente. Tu gimnasio local con descuentos especiales.</p>
      <div class="hero-actions">
        <a href="#plans" class="btn">Ver planes</a>
        <a href="index.html" class="btn ghost">Volver a Jalamburguers</a>
      </div>
      <!-- üìπ VIDEO O FOTO del gimnasio: Ocupa todo el recuadro (100% ancho) -->
      <!-- Opci√≥n 1: Video -->
      <!-- <video style="width: 100%; height: 400px; object-fit: cover; border-radius: 12px; margin-top: 32px;" controls>
        <source src="images/gym-video.mp4" type="video/mp4">
        Tu navegador no soporta videos HTML5
      </video> -->
      
      <!-- Opci√≥n 2: Imagen del gimnasio -->
      <!-- <img src="images/gym.jpg" alt="Interior del Gimnasio JalFits" style="width: 100%; height: 400px; object-fit: cover; border-radius: 12px; margin-top: 32px;"> -->
      
      <!-- Placeholder temporal -->
      <div style="margin-top: 32px; background: var(--color-border); border-radius: var(--border-radius); padding: 60px 20px; text-align: center; color: var(--color-text-light);">
        <p>üìπ Aqu√≠ va tu foto o video del gimnasio (images/gym.jpg o gym.mp4)</p>
      </div>
    </div>
  </div>
</header>

<!-- ===================================================================
     MAIN CONTENT
     =================================================================== -->
<main>
  <!-- PLANS SECTION -->
  <section id="plans" class="container">
    <h2>üí™ Planes de Membres√≠a</h2>
    <p class="muted">Acceso completo a todas nuestras instalaciones: m√°quinas, pesas, clases grupales, piscina y sauna.</p>

    <div class="grid cards">
      <div class="card">
        <h3>Plan Mensual</h3>
        <p class="price" id="price-monthly">30‚Ç¨</p>
        <p style="color: var(--color-accent); font-weight: 600;" id="discount-label-monthly" style="display: none;"></p>
        <ul style="margin: 0; padding: 0 0 0 20px; color: var(--color-text);">
          <li>Acceso 24/7 al gimnasio</li>
          <li>Todas las m√°quinas e instalaciones</li>
          <li>Clases grupales ilimitadas</li>
          <li>Acceso a sauna y piscina</li>
        </ul>
        <button class="btn" onclick="enrollPlan('mensual')">Apuntarme Ahora</button>
      </div>

      <div class="card">
        <h3>Plan Trimestral</h3>
        <p class="price" id="price-quarterly">75‚Ç¨</p>
        <p style="color: var(--color-accent); font-weight: 600;" id="discount-label-quarterly">Ahorra 15% vs. mensual</p>
        <ul style="margin: 0; padding: 0 0 0 20px; color: var(--color-text);">
          <li>Acceso 24/7 al gimnasio</li>
          <li>Todas las m√°quinas e instalaciones</li>
          <li>Clases grupales ilimitadas</li>
          <li>Acceso a sauna y piscina</li>
          <li>‚ú® Sesi√≥n de orientaci√≥n gratis</li>
        </ul>
        <button class="btn" onclick="enrollPlan('trimestral')">Apuntarme Ahora</button>
      </div>
    </div>

    <!-- üéâ MENSAJE DE DESCUENTO: Se muestra si viene con descuento de Jalamburguers -->
    <div id="discountMessage" style="margin-top: 32px; padding: 24px; background: rgba(16, 185, 129, 0.15); border: 2px solid var(--color-accent); border-radius: var(--border-radius); text-align: center; display: none;">
      <h3 style="color: var(--color-accent); margin-top: 0;">üéâ ¬°Descuento Especial Activo!</h3>
      <p id="discountText" style="margin: 0; font-size: 1.125rem; font-weight: 600; color: var(--color-accent);"></p>
      <p style="margin-top: 12px; font-size: 0.875rem; color: var(--color-text-light);">El descuento se aplicar√° autom√°ticamente al finalizar la compra</p>
    </div>
  </section>
  
  <!-- BENEFITS SECTION -->
  <section class="container">
    <h2>‚ú® ¬øPor qu√© elegir JalFits?</h2>
    <div class="grid cards">
      <div class="card">
        <h3>üèãÔ∏è Instalaciones Modernas</h3>
        <p>Equipamiento de √∫ltima generaci√≥n, m√°quinas nuevas y espacios amplios para tu comodidad.</p>
      </div>
      <div class="card">
        <h3>üë• Clases Grupales</h3>
        <p>Aer√≥bic, yoga, pilates, spinning y m√°s. Clases a diferentes horas del d√≠a.</p>
      </div>
      <div class="card">
        <h3>ü§ù Comunidad Activa</h3>
        <p>√önete a una comunidad de deportistas comprometidos. Eventos y competiciones mensuales.</p>
      </div>
      <div class="card">
        <h3>üçî Partnership con Jalamburguers</h3>
        <p>Obt√©n descuentos especiales en comidas saludables. Comida y entrenamiento en un lugar.</p>
      </div>
    </div>
  </section>

  <!-- CONTACT SECTION -->
  <section id="contact" class="container">
    <div class="about">
      <h2>üìç Ubicaci√≥n y Contacto</h2>
      
      <div class="contact">
        <div>
          <h4>Direcci√≥n</h4>
          <p>C/ Ejemplo 123<br>Ciudad, 12345</p>
        </div>
        <div>
          <h4>Tel√©fono</h4>
          <p><a href="tel:+34600000000" style="color: var(--color-accent); text-decoration: none;">+34 600 000 000</a></p>
        </div>
        <div>
          <h4>Email</h4>
          <p><a href="mailto:info@jalfits.example" style="color: var(--color-accent); text-decoration: none;">info@jalfits.example</a></p>
        </div>
        <div>
          <h4>Horario</h4>
          <p>Lun-Vie: 06:00 ‚Äî 23:00<br>S√°b-Dom: 08:00 ‚Äî 22:00</p>
        </div>
      </div>

      <!-- üì∏ MAPA: Agregar aqu√≠ tu mapa -->
      <!-- Opci√≥n 1: Google Maps -->
      <!-- <iframe src="https://www.google.com/maps/embed?pb=..." width="100%" height="450" style="border:0; border-radius: 12px; margin-top: 24px;" allowfullscreen="" loading="lazy"></iframe> -->
      
      <!-- Opci√≥n 2: Imagen de mapa -->
      <!-- <img src="images/gym-map.jpg" alt="Mapa de ubicaci√≥n JalFits" style="width: 100%; border-radius: 12px; margin-top: 24px;"> -->
      
      <div style="margin-top: 24px; background: var(--color-border); border-radius: var(--border-radius); padding: 40px; text-align: center; color: var(--color-text-light);">
        <p>üó∫Ô∏è Aqu√≠ va tu mapa (Google Maps, Leaflet, etc.)</p>
      </div>
    </div>
  </section>
</main>

<!-- ===================================================================
     FOOTER
     =================================================================== -->
<footer class="site-footer">
  <div class="container footer-grid">
    <div style="display: flex; align-items: center; gap: 16px;">
      <!-- LOGO CIRCULAR en footer (60x60px) -->
      <img src="images/gym-logo.png" alt="Logo JalFits" class="logo-circular-md" style="border-color: var(--color-accent);">
      <div>
        <h4>JalFits</h4>
        <p>Tu gimnasio local con planes accesibles y ambiente de comunidad.</p>
      </div>
    </div>
    <div>
      <h4>S√≠guenos</h4>
      <p>
        <a href="#">Instagram</a> ‚Ä¢ 
        <a href="#">Facebook</a> ‚Ä¢ 
        <a href="#">TikTok</a>
      </p>
    </div>
    <div>
      <h4>Enlaces</h4>
      <p>
        <a href="index.html">Jalamburguers</a> ‚Ä¢ 
        <a href="#">Pol√≠tica de privacidad</a>
      </p>
    </div>
  </div>
  <div class="container" style="text-align: center; padding-top: 16px; border-top: 1px solid rgba(255, 255, 255, 0.1); margin-top: 24px;">
    <p style="margin: 0; font-size: 0.875rem; color: rgba(255, 255, 255, 0.6);">
      ¬© 2026 JalFits ‚Ä¢ Todos los derechos reservados | Asociado de Jalamburguers
    </p>
  </div>
</footer>

<!-- ===================================================================
     SCRIPTS
     =================================================================== -->
<script src="js/notifications.js"></script>
<script src="js/cookies.js"></script>
<script src="js/auth.js"></script>

<script>
const GYM_PLANS = {
  mensual: { price: 30, name: 'Plan Mensual' },
  trimestral: { price: 75, name: 'Plan Trimestral' }
};

let activeDiscount = null;

function enrollGymPlan(plan, originalPrice) {
  let finalPrice = originalPrice;
  let discountMessage = '';

  if (activeDiscount) {
    finalPrice = originalPrice * 0.7;
    discountMessage = ` (Descuento 30%: ${originalPrice}‚Ç¨ ‚Üí ${finalPrice.toFixed(2)}‚Ç¨)`;
  }

  const message = `${GYM_PLANS[plan].name} seleccionado${discountMessage}. Contacta con nosotros para completar tu registro.`;
  notificationManager.success('¬°Gracias!', message);
}

function enrollPlan(plan) {
  // Show a confirmation toast, then redirect to the dedicated registration page
  const originalPrice = GYM_PLANS[plan]?.price || 0;
  const finalPrice = activeDiscount ? (originalPrice * 0.7) : originalPrice;
  const discountMessage = activeDiscount ? ` (Descuento 30%: ${originalPrice}‚Ç¨ ‚Üí ${finalPrice.toFixed(2)}‚Ç¨)` : '';
  const message = `${GYM_PLANS[plan].name} seleccionado${discountMessage}. Abriendo formulario de registro...`;

  if (typeof notificationManager !== 'undefined') {
    notificationManager.success('¬°Gracias!', message);
  }

  const params = new URLSearchParams({ plan, price: finalPrice.toString(), discount: activeDiscount ? '1' : '0' });
  setTimeout(() => {
    window.location.href = `jalfits-register.html?${params.toString()}`;
  }, 900);
}

document.addEventListener('DOMContentLoaded', function() {
  if (localStorage.getItem('gymDiscount') === 'true') {
    activeDiscount = true;
    
    const messageDiv = document.getElementById('discountMessage');
    const messageText = document.getElementById('discountText');
    const priceMonthly = document.getElementById('price-monthly');
    const priceQuarterly = document.getElementById('price-quarterly');
    const discountLabelMonthly = document.getElementById('discount-label-monthly');
    const discountLabelQuarterly = document.getElementById('discount-label-quarterly');
    
    messageDiv.style.display = 'block';
    messageText.innerText = 'Descuento del 30% aplicado gracias a Jalamburguers üí™';
    
    const monthlyDiscount = (30 * 0.7).toFixed(2);
    const quarterlyDiscount = (75 * 0.7).toFixed(2);
    
    priceMonthly.innerHTML = `<span style="text-decoration: line-through; opacity: 0.6;">30‚Ç¨</span> ${monthlyDiscount}‚Ç¨`;
    priceQuarterly.innerHTML = `<span style="text-decoration: line-through; opacity: 0.6;">75‚Ç¨</span> ${quarterlyDiscount}‚Ç¨`;
    
    discountLabelMonthly.style.display = 'block';
    discountLabelMonthly.textContent = '‚ö° 30% de descuento aplicado';
    discountLabelQuarterly.textContent = '‚ö° Ahorra 15% + 30% descuento = 40.5%';
    
    localStorage.removeItem('gymDiscount');
    
    notificationManager.success('¬°Descuento de JalFits!', 'Tienes 30% de descuento en tu membres√≠a');
  }
});

// --- Card lookup UI: permite ingresar c√≥digo de tarjeta y ver tiempo restante ---
function renderCardLookup() {
  const container = document.createElement('div');
  container.id = 'card-lookup-container';
  container.style.marginTop = '32px';
  container.innerHTML = `
    <h3>üîë ¬øTienes una tarjeta f√≠sica de JalFits?</h3>
    <p class="muted">Introduce el c√≥digo de tu tarjeta para ver cu√°nto tiempo queda en tu plan.</p>
    <div style="display:flex; gap:8px; align-items:center; margin-top:12px;">
      <input id="card-code-input" type="text" placeholder="C√≥digo de tarjeta (p.ej. JAL-1234-ABCD)" style="padding:8px; flex:1; border-radius:6px; border:1px solid rgba(255,255,255,0.08); background:transparent; color:inherit;">
      <button class="btn" onclick="checkGymCard()">Comprobar</button>
    </div>
    <div id="card-check-result" style="margin-top:16px;"></div>
  `;

  const plansSection = document.getElementById('plans');
  if (plansSection) plansSection.parentNode.insertBefore(container, plansSection.nextSibling);
}

function checkGymCard() {
  const code = document.getElementById('card-code-input').value.trim();
  const result = document.getElementById('card-check-result');
  result.innerHTML = '';
  if (!code) {
    notificationManager.error('C√≥digo vac√≠o', 'Introduce el c√≥digo de tu tarjeta.');
    return;
  }

  // Lookup in localStorage (gym_cards)
  const raw = localStorage.getItem('gym_cards');
  if (!raw) {
    result.innerHTML = '<p class="muted">No se han encontrado tarjetas registradas en este navegador.</p>';
    return;
  }

  let cards = [];
  try { cards = JSON.parse(raw) || []; } catch(e) { cards = []; }

  const card = cards.find(c => c.code === code);
  if (!card) {
    result.innerHTML = `<p class="muted">C√≥digo no encontrado. ¬øSeguiste correctamente el proceso de registro?</p>`;
    notificationManager.error('C√≥digo no v√°lido', 'No se ha encontrado la tarjeta.');
    return;
  }

  // Calcular tiempo restante
  const now = new Date();
  const expiry = new Date(card.expiryDate);
  const diffMs = expiry - now;
  if (diffMs <= 0) {
    result.innerHTML = `<div class="card"><h4>Tarjeta: ${card.code}</h4><p>Plan: ${card.plan} ‚Äî Expirado el ${expiry.toLocaleDateString()}</p><p style="color:var(--color-accent);">Renovaci√≥n necesaria</p></div>`;
    notificationManager.warning('Plan caducado', 'Tu membres√≠a ha expirado. Renovar para volver a usar el gimnasio.');
    return;
  }

  const daysLeft = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
  result.innerHTML = `
    <div class="card">
      <h4>Tarjeta: ${card.code}</h4>
      <p>Titular: ${card.name} ‚Äî DNI: ${card.dni}</p>
      <p>Plan: ${card.plan}</p>
      <p>Vence el: ${expiry.toLocaleDateString()} ‚Äî <strong>${daysLeft} d√≠as restantes</strong></p>
    </div>
  `;
  notificationManager.success('Tarjeta v√°lida', `Quedan ${daysLeft} d√≠as en tu plan.`);
}

document.addEventListener('DOMContentLoaded', function() {
  renderCardLookup();
});
</script>

</body>
</html>
